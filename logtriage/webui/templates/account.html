{% extends "base.html" %}
{% block content %}
<div class="grid two-col">
  <div class="card" style="grid-column: span 2;">
    <p class="helper-text">Update your bcrypt hash inside <code>webui.admin_users</code>. A backup of <code>config.yaml</code> will be written.</p>
    <form method="post" action="{{ url_for('change_password') }}" style="display:grid; gap:0.75rem; max-width:520px;">
      <input type="hidden" name="csrf_token" value="{{ request.session.get('csrf_token', '') }}">
      <label>
        <span class="muted" style="display:block; margin-bottom:0.25rem;">Current password</span>
        <input type="password" name="current_password" required>
      </label>
      <label>
        <span class="muted" style="display:block; margin-bottom:0.25rem;">New password</span>
        <input type="password" name="new_password" minlength="8" required>
      </label>
      <label>
        <span class="muted" style="display:block; margin-bottom:0.25rem;">Confirm new password</span>
        <input type="password" name="confirm_password" minlength="8" required>
      </label>
      <button type="submit" class="secondary">Save new password</button>
    </form>
  </div>

  <div class="card">
    <h2>Need to add an admin?</h2>
    <p class="helper-text">Edit <code>webui.admin_users</code> directly in the <a href="{{ url_for('edit_config') }}">config editor</a>. Each entry needs a <code>username</code> and <code>password_hash</code> generated with bcrypt.</p>
  </div>
</div>
{% endblock %}
